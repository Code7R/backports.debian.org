[[!toc  startlevel=2 levels=2]]

##Packaging

###Introduction 
The packages on backports.org are made by volunteers. If you
like to help with backporting packages from the Debian archive, make sure you
follow these guidelines. 

###Basic Rules 

* [Subscribe to the backports users mailinglist](http://lists.backports.org/mailman/listinfo/backports-users). Every announcement and bugreport should come over this mailinglist, so this is a must.
* Use "lenny-backports" as distribution, neither "stable" nor "unstable".
* Make sure that you have a proper build environment which only contains lenny and no unneeded backports. Maybe you want to consider pbuilder or cowbuilder for building packages.
* Append "~bpo${debian_release}+${build_int}" to the version number, e.g. "1.2.3-4" now becomes "1.2.3-4~bpo50+1", or for native packages, "1.2.3" becomes "1.2.3~bpo50+1".
* Please only upload package with a noteable userbase. User request for the package may be an indicator.
* Don't backport minor version changes without any user visible changes or bugfixes
* To guarantee an upgrade path from stable+backports to the next stable, the
package should be in testing.. Of course there are some exceptions: Security
updates. If your package had a security update you can upload a new backport
even if its not yet in testing. There are also some other exception for
packages like the kernel, xorg or oo.org.
* Do not do any changes to the package beside of backporting stuff.
* Include all changelog entries since the last version on backports.org or
since stable if it's the first version. You should to this by passing
"-v<version>" to dpkg-buildpackage. Eg: "debuild -sa -v0.7.5-2", where
"0.7.5-2" is the version in stable.
* Before uploading please think about how useful the package is for stable
users and if you want to support the package until support for the distribution
you uploaded ends.

###Additionally

* Do not lower the standards version, it is just useless.
* Do not add lintian/linda overrides to suppress the 'wrong-distribution'
warnings.
* Do always look at the interdiff between the testing version and the backports
version, keep in mind that it should be as minimal as possible.
* Do write good changelogs and document all changes you needed to do in order
to make it run on stable.

##Security Uploads

If you upload a package which fixes security related problems please send a
mail to the [backports-security-announce mailinglist](http://lists.backports.org/mailman/listinfo/backports-security-announce). 

Your mail should follow this template:

    Subject: Security Update for <packagename>
      
    <Uploader> uploaded new packages for <packagename> which fixed the
    following security problems:
    
    CVE-XXXX or whatever ID if existant
      short description 
      ...
    CVE-.... 
      ....

    For the lenny-backports distribution the problems have been fixed in
    version <packageversion>.

    <other distributions if any> 
  
    Upgrade instructions
    --------------------
  
    If you don't use pinning (see [1]) you have to update the package
    manually via "apt-get -t lenny-backports install <packagelist>" with
    the packagelist of your installed packages affected by this update.
    [1] <http://backports.org/dokuwiki/doku.php?id=instructions>
  
    We recommend to pin the backports repository to 200 so that new
    versions of installed  backports will be installed automatically. 
  
      Package: *
      Pin: release a=lenny-backports
      Pin-Priority: 200

The Mailinglist is moderated so please be a little bit patient if your post does not appear immediately on the list. 

##Uploading

###Debian Developers

All Debian Developers can send a signed mail to Norbert Tretkowski or Alexander
Wirt to add their key to the keyring of backports.org. Once your key is
imported, you can start uploading. If you are using dupload on testing/sid
(there is a patched version of dput on backports.org already), you can add

    package config;
    $cfg{'bpo'} = {
      fqdn => "www.backports.org",
      incoming => "/",
    };
    1

to your *~/.dupload.conf* file. For dput, use the following in *~/.dput.cf*:

    [bpo]
    fqdn = www.backports.org
    incoming = /
    method = ftp
    login = anonymous

You are also free to use dput from backports.org which already supports bpo. 

###Non Debian Developer 

If you are not a Debian Developer, please upload your backport somewhere
(binaries and sources, e.g. to mentors.debian.net), post a link to its .dsc
file on <backports-users@lists.backports.org> and ask for review and upload.

Please note, that you are responsible for this backport from the time on when
it was accepted on backports.org. This means, you have to keep track of the
changes in unstable, update your backport when a new version enters testing and
provide security updates when needed. If you are not willing or capable of
doing this, you better ask someone else (e.g. on the mentioned mailinglist) to
create and maintain the backport. 

##Best Practice

###Check NEW queue

Check the NEW queue at <http://www.backports.org/debian/new.html> to avoid
double efforts before you start to backport something. 

###Inform the Maintainer 

After (and sometimes even before) the backport was accepted it may be a good
idea to contact the maintainer of the package in Debian to tell them that you
backported their package. If you are not already
[subscribed](http://lists.backports.org/mailman/listinfo) to
<backports-users@lists.backports.org>, please do so. There might be
questions/problems from users regarding your backport(s) which you can answer
best and hopefully solve.

###Inform the Backporter 

If there is already a backport of your package of choice but it's outdated and you want to update it please inform the person who backported the last accepted version about your intensions. You can get the information from <http://www.backports.org/~formorer/changes/lenny-backports.html>

###Uploaders

If you put yourself into the Uploaders: field in debian/control you can easily
track your backports on the package overview at
<http://qa.debian.org/developer.php>. 
